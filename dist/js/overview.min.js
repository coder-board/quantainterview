!function(){Vue.config.devtools=!1,Vue.use(Vue.resource);var t=new Vue({el:"body",data:{timer:null,output_url:"../phpCtrl/output.php",status:{isLoading:!0,isSelecting:!0},option:{year:2016,department:0,turn:0,turn_result:0,keyword:""},formGroup:[{key:"year",name:"年份",value:[]},{key:"department",name:"部门",value:[{depart_name:"所有",depart_id:"0"}]},{key:"turn",name:"面试轮次",value:[{tag:"所有",id:0},{tag:"一面",id:1},{tag:"二面",id:2}]},{key:"turn_result",name:"面试结果筛选",value:[{tag:"所有",id:0},{tag:"不通过",id:1},{tag:"待定",id:2},{tag:"通过",id:3}]}],modal:{type:"notice",status:!1,text:""},mainData:[]},ready:function(){this.getFormGroup(),location.search.indexOf("?")!=-1&&this.setOption(),this.renderData()},methods:{parseParam:function(t){var e="?";for(key in t)e+=key+"="+t[key]+"&";return e=e.substring(0,e.length-1)},getFormGroup:function(){this.$http.get("../phpCtrl/getFormGroup.php").then(function(t){var e=this.formGroup[1].value.concat(t.json().data.depart);this.$set("formGroup[0].value",t.json().data.year),this.$set("formGroup[1].value",e),this.option.year=t.json().data.year[0].id})},setOption:function(){var t=location.search,e={year:2016,department:0,turn:0,turn_result:0,keyword:""};if(t.indexOf("?")!=-1){t=t.substr(1,t.length).split("&");for(var a,n=0,o=t.length;n<o;n++)a=t[n].split("="),e[a[0]]=a[1];this.$set("option",e)}},renderData:function(){this.output_url="../phpCtrl/output.php"+this.parseParam(this.option),this.status.isSelecting=!0,this.$http.get("../phpCtrl/overview.php",{emulateJSON:!0,params:this.option}).then(function(t){console.log(t.json()),1==t.json().result?(this.$set("mainData",t.json().data),this.status.isLoading=!1,this.status.isSelecting=!1):(t.json().result=-1)?location.href="./login.html":(alert("请求出现异常，请重新登录"),location.href="./login.html")})},onFocus:function(t){console.log(t)},delay:function(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.renderData,300)},deleteItem:function(t){this.$http.get("../phpCtrl/delete.php",{emulateJSON:!0,params:{itv_code:t}}).then(function(t){1==t.json().result&&(this.status.isLoading=!0,this.renderData()),this.onModal("notice",t.json().msg,t.json().data)})},onModal:function(t,e,a){this.modal.type=t,this.modal.text=e,this.modal.data=a,this.modal.status=!0},offModal:function(){this.modal.status=!1}}});Vue.filter("toDepartment",function(e){var a=t.formGroup[1].value;for(var n in a)if(a[n].depart_id==e)return a[n].depart_name;return"无"}),Vue.filter("toResult",function(t){switch(t){case"3":return"通过";case"2":return"待定";case"1":return"不通过";default:return"无记录"}}),Vue.filter("each",function(t){return t.itv_code+"--"+t.name+"--"+t.phone})}();